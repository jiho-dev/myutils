
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" ê¸°ë³¸ í™˜ê²½ì„ ì„¤ì •í•œë‹¤.
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
set exrc
set title
set history=100
set	showcmd
set showmode
" {}ì˜ ìŒì„ ë³´ì—¬ ì¤€ë‹¤.
set showmatch
" set nowrap
set wrap
set noignorecase
set nomesg
set noslowopen
set noterse
"set nonumber
set number
"set report=2
"set wrapmargin=3
set nolinebreak
set ruler
set autoindent
"set cindent
set smartindent
set visualbell t_vb=
set cursorline

" swap íŒŒì¼ì„ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤.
set noswapfile
set directory=$HOME/.vimswp//

" debugging
"set verbosefile=~/.vim/verbose.log
"set verbose=100

" í˜„ì¬ ë””ë ‰í† ë¦¬ ë³€ê²½
set autochdir

filetype indent on

" tabì„ spaceìœ¼ë¡œ ë³€ê²½
"set expandtab
set shiftwidth=4
set tabstop=4
set softtabstop=4 " makes the spaces feel like real tabs

"ë¶™ì—¬ ë„£ê¸°ì‹œ ê³„ë‹¨í˜„ìƒ ì œê±°(http://demo.initech.com/?document_srl=9718)
"set paste!

"Backspace key won't move from current line
set backspace=indent,eol,start

"""""""""""""""""""""""""""""""""""""""""""
" setup encoding parameters
"""""""""""""""""""""""""""""""""""""""""""
"set fileencodings=utf-8,cp949,euc-kr
set fileencodings=utf-8,euc-kr,latin1 
"set encoding=cp949
"set encoding=euc-kr
"set encoding=utf-8

"""""""""""""""""""""""""""""""""""""""""""
" setup terminal encoding
"""""""""""""""""""""""""""""""""""""""""""
set termencoding=utf-8

" { ì˜ ìœ„ì¹˜ ì§€ì •
" help cinoptions-values
" vim default values
"cinoptions=>s,e0,n0,f0,{0,}0,^0,:s,=s,l0,gs,hs,ps,ts,+s,c3,C0,(2s,us, \U0,w0,m0,j0,)20,*30
"set cino=e1

" 091030 í˜„ì¬ ì‚¬ìš©ì¤‘.
" {}ì˜ ìœ„ì¹˜ê°€ ë³µí•©ì ìœ¼ë¡œ ì‚¬ìš© ë˜ëŠ” ê²½ìš° ë¶ˆí¸í•˜ë‹¤.
"set cino={1s,:0,(0
"set cino=\:0,:0,(0
"set cino=:0,(0,c0,l1
"set cino=(0,c0,l1 " switch-case ì •ë ¬ ë°©ë²• ë³€ê²½.
set cino=(0,c0,:0 " switch-case ì •ë ¬ ë°©ë²• ë³€ê²½.


" ëª…ë ¹ì–´ ì‹¤í–‰ì‹œ ìë™ ì €ì¥
set autowrite

" fileformat is unix
set ff=unix

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"í¸ì§‘ ê¸°ëŠ¥ ì„¤ì •
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

"ì»¤ì„œì˜ ìœ„ì¹˜ë¥¼ í•­ìƒ ë³´ì´ê²Œ í•¨.
set ru

"ì™„ì„±ì¤‘ì¸ ëª…ë ¹ì„ í‘œì‹œ
set sc

"ì—¬ëŸ¬ ê°€ì§€ ì´ë™ ë™ì‘ì‹œ ì¤„ì˜ ì‹œì‘ìœ¼ë¡œ ìë™ ì´ë™
set sol

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"ê²€ìƒ‰ ê¸°ëŠ¥ ì„¤ì •
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

"ê²€ìƒ‰ì–´ ê°•ì¡° ê¸°ëŠ¥
set hls

"ê²€ìƒ‰ì‹œ íŒŒì¼ ëì—ì„œ ì²˜ìŒìœ¼ë¡œ ë˜ëŒë¦¬ê¸° ì•ˆí•¨
"set nows

"ê²€ìƒ‰ì‹œ ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë³„í•˜ì§€ ì•ŠìŒ
set ic

"ë˜‘ë˜‘í•œ ëŒ€ì†Œë¬¸ì êµ¬ë³„ ê¸°ëŠ¥ ì‚¬ìš©
set scs

" tab menu off
set showtabline=0

" ìœˆë„ìš° ìƒì„± ì˜µì…˜
set splitbelow
set splitright

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" ê¸°íƒ€
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
syntax on
filetype on

" for css
"filetype plugin indent on

" ë§ˆìš°ìŠ¤ ì‚¬ìš©ì„ í™œì„±í™” í•œë‹¤.
"set mouse=an

"if has("terminfo")
"set t_Co=8
"set t_Sf=[3%p1%dm
"set t_Sb=[4%p1%dm
"else
"set t_Co=8
"set t_Sf=[3%dm
"set t_Sb=[4%dm
"endif
"
" disable autofold
set nofoldenable

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"  ì»¬ëŸ¬ë¥¼ ì •ì˜í•œë‹¤.
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"============================"
" Color Code Table
"============================"
" 0		Black
" 1		Dark Red
" 2		Drak Green
" 3		Yellow
" 4		Dark Blue
" 5		Dark Magenta
" 6 	Dark Cyan
" 7		White
"============================"
"*cterm-colors*

"NR-16   NR-8    COLOR NAME
"0       0       Black
"1       4       DarkBlue
"2       2       DarkGreen
"3       6       DarkCyan
"4       1       DarkRed
"5       5       DarkMagenta
"6       3       Brown, DarkYellow
"7       7       LightGray, LightGrey, Gray, Grey
"8       0*      DarkGray, DarkGrey
"9       4*      Blue, LightBlue
"10      2*      Green, LightGreen
"11      6*      Cyan, LightCyan
"12      1*      Red, LightRed
"13      5*      Magenta, LightMagenta
"14      3*      Yellow, LightYellow
"15      7*      White

"set t_Co=256
set t_Co=16

"colorschem evening
colorschem ron

"ì¼ë°˜ì ì¸ ë¬¸ìì— ì ìš© ëœë‹¤.
"hi Normal ctermbg=DarkGrey ctermfg=White guifg=White guibg=grey20
"hi Normal ctermbg=DarkGrey ctermfg=Gray guifg=Gray guibg=Black

"
"	Normal Tag
"
hi 			Search 		ctermfg=0 ctermbg=7 
highlight	Comment		ctermfg=6
"highlight	Include		ctermfg=6 cterm=bold
"highlight	Statement	ctermfg=3
"highlight	String		ctermfg=3
"highlight	Type		ctermfg=2
"highlight	Function	cterm=bold
"highlight	Error		ctermfg=1 cterm=bold
"highlight	PreCondit	ctermfg=6 cterm=bold
"
" for GO
hi goDiagnosticError ctermbg=5 ctermfg=7*
hi goDiagnosticWarning ctermbg=7 ctermfg=0

" í˜„ì¬ ë¼ì¸ì„ í‘œì‹œí•œë‹¤.
"highlight ActiveJob ctermfg=black ctermbg=white
"hi LineNr term=underline ctermfg=DarkYellow guifg=Yellow
hi LineNr ctermfg=DarkYellow guifg=Yellow
"hi CursorLineNr term=underline cterm=underline ctermfg=DarkYellow gui=underline guifg=Yellow
hi CursorLineNr term=reverse cterm=reverse ctermfg=DarkYellow gui=reverse guifg=Yellow
hi CursorLine term=NONE cterm=NONE 

hi WarningMsg term=standout ctermfg=LightRed guifg=Red

" (), {} ë§¤ì¹˜
"hi MatchParen cterm=bold ctermbg=none ctermfg=magenta
hi MatchParen cterm=NONE ctermbg=red ctermfg=white
"
"	Makefile
"
highlight   makeSpecial ctermfg=1 cterm=NONE
highlight   makeTarget  ctermfg=1 cterm=NONE
highlight   makeIdent   ctermfg=4 cterm=NONE
highlight   makeEscapedChar ctermfg=1 cterm=NONE

"
"	C programming Color definition
"
highlight	cComment	ctermfg=6
highlight	cType		ctermfg=2
"highlight	cppType		ctermfg=3
"highlight	cppClassDecl	ctermfg=2
"highlight	cppClassPreDecl	ctermfg=2
highlight	cStructure	ctermfg=2
highlight	cStorageClass	ctermfg=2
"highlight	cFunction	ctermfg=7
"highlight	cppFunction	ctermfg=7
"highlight	cppStatement	ctermfg=2
"highlight	cppMethod	ctermfg=7

"highlight	cString		ctermfg=5
highlight	cString		ctermfg=red
highlight	cNumber		ctermfg=red
highlight	cConstant	ctermfg=red
"highlight	cCharacter	ctermfg=7
"highlight	cSpecial	ctermfg=7
highlight	cSpecial	ctermfg=Magenta

"""""
highlight	cText		ctermfg=Gray
highlight	cStatement	ctermfg=Gray
"highlight	cCharacter	ctermfg=Gray
"""""

highlight	cLabel		ctermfg=2
"highlight	cLabel		ctermfg=Green
highlight	cUserLabel	ctermfg=2
highlight	cUserCont	ctermfg=2
highlight	cConditional	ctermfg=2
highlight	cRepeat		ctermfg=2
highlight	cStatement	ctermfg=2
highlight	cOperator	ctermfg=2
highlight	cError		ctermfg=2

"highlight	cCommentError	ctermfg=7
highlight	cInclude	ctermfg=2
"highlight	cIncluded	ctermfg=4
"highlight	cPreProc	ctermfg=7
"highlight	cPreCondit	ctermfg=1
"highlight	cDefine		ctermfg=orange

"
"	HTML
"
"highlight	htmlStatement	ctermfg=3
"highlight	htmlValue	ctermfg=6
"highlight	htmlString	ctermfg=6

"highlight link htmlFunction   ctermfg=3
"highlight htmlTag    ctermfg=3
"highlight link htmlFuncDef    ctermfg=3
"highlight link htmlArg    Type
"highlight link htmlTagName    htmlStatement
"highlight link htmlValue  Value
"highlight link htmlSpecialChar Special
"highlight link htmlSpecial    Special
"highlight link htmlSpecialChar    Special
"highlight link htmlString     String
"highlight link htmlCharacter  Character
"highlight link htmlSpecialCharacter   htmlValue
"highlight link htmlNumber     Number
"highlight link htmlStatement  Statement
"highlight link htmlComment    Comment
"highlight link htmlPreProc    PreProc
"highlight link htmlType   Type
"highlight link htmlValue  String

"
"	Java
"
"highlight javaComment    ctermfg=2
"highlight javaExternal    ctermfg=6
"highlight javaConditional    ctermfg=2
"highlight javaRepeat    ctermfg=2
highlight javaExceptions    ctermfg=1
highlight javaClassDecl    ctermfg=3

highlight javaType    ctermfg=7
highlight javaOperator    ctermfg=7

highlight javaBraces    ctermfg=3
highlight javaFuncDef    ctermfg=3
highlight javaString    ctermfg=7

highlight javaClassDef	ctermfg=3

" for vimdiff
" cterm - sets the style
" ctermfg - set the text color
" ctermbg - set the highlighting
" DiffAdd - line was added
" DiffDelete - line was removed
" DiffChange - part of the line was changed (highlights the whole line)
" DiffText - the exact part of the line that changed

"highlight DiffAdd cterm=none ctermfg=bg ctermbg=Green gui=none guifg=bg guibg=Green
"highlight DiffAdd cterm=none ctermfg=White ctermbg=Green gui=none guifg=bg guibg=Green
"highlight DiffDelete cterm=none ctermfg=bg ctermbg=Red gui=none guifg=bg guibg=Red
"highlight DiffDelete cterm=none ctermfg=bg ctermbg=White gui=none guifg=bg guibg=White
"highlight DiffChange cterm=none ctermfg=bg ctermbg=Yellow gui=none guifg=bg guibg=Yellow
"highlight DiffChange cterm=none ctermfg=White ctermbg=Yellow gui=none guifg=bg guibg=Yellow
"highlight DiffText cterm=none ctermfg=bg ctermbg=Magenta gui=none guifg=bg guibg=Magenta
"highlight DiffText cterm=none ctermfg=White ctermbg=Magenta gui=none guifg=bg guibg=Magenta


"highlight BadWhitespace ctermbg=red guibg=#d70000

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"  function key mapping
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

"map 	<2-LeftMouse> <NOP>
"map 	<RightMouse> <NOP>
"map 	<2-RightMouse> <NOP>

" í•¨ìˆ˜ help
"map 	<F1> 	K
"imap 	<F1> 	<C-O>K
map 	<F1> 	<NOP>
imap 	<F1> 	<NOP>

" íŒŒì¼ ì €ì¥
map 	<F2> 	:w!<CR>
imap 	<F2> 	<C-O>:w!<CR>

" Run make
map 	<F3> 	:call DoMake()<CR>
imap 	<F3> 	<C-O>:call DoMake()<CR>
"map 	<F3> 	:make!<CR>
"imap 	<F3> 	<C-O>:make!<CR>

map 	<F4>	:make! custom<CR>
imap 	<F4> 	<C-O>:make! custom<CR>

" F4 to toggle paste mode
map 	<F5> :set invpaste<CR>
set pastetoggle=<F5>

"map 	<F5> 	:25vs ./<CR>
"map 	<F5> 	:make! tag<CR>
"imap 	<F5> 	<C-O>:make! tag<CR>

" function prototype
map 	<F6> 	[i

" í´ë” ì°½ ì´ë™
"map 	<F6> 	w

" ì„ íƒëœ íŒŒì¼ ì—´ê¸°
"map 	<F7> 	O

"
"map 	<F8>

" ë¬´ì¡°ê±´ ì¢…ë£Œ
"map 	<F9> 	:q!<CR>
"imap 	<F9> 	<C-O>:q!<CR>

" [ì¤‘ìš”] : screenì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ F10~F12ëŠ” ë‚¨ê²¨ ë†“ëŠ”ë‹¤.
" ì •ì˜ëŠ” .screenrcì— ìˆìŒ.
"map 	<F10>
"map 	<F11>
"map 	<F12>

" {{{ }}}
"nmap 	<F9> 	[{v]}zf
" folding
"nmap 	<F11> 	v]}zf
" folding ë³µêµ¬
"nmap 	<F12> 	zo

" Vertical Window Movement
" Move left window
"map <F9> 	<C-W>H
" Move right window
"ap <F12> 	<C-W>L
" Move up window
"ap <F10> 	<C-W>K
" Move donw window
"ap <F11> 	<C-W>J

"map J 	<C-W>H
"map K 	<C-W>L
"map I 	<C-W>K
"map M 	<C-W>J

map <F7> 	<C-O>
map <F8> 	<C-I>

map <F9>    :IndexerRebuild<CR>
imap <F9>   :IndexerRebuild<CR>

"map <F9>    :call MakeDoxygenComment()<CR>
"map <F10> 	:call InsertFileDesc()<CR>
"map <F11> 	:call InsertHeaderFileDesc()<CR>
"map <F12> 	:call InsertExcludeTag()<CR>
"map <F12> 	:NERDTreeToggle<CR>
map <F12> 	:call RemoveVimSwapFile()<CR>

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"   key mapping
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" copy to clipboard file
"map 	<C-C> 	:w! ~/.vimbuf<CR>
"map 	<C-C> 	y:tabnew<CR>p1Gdd:w! ~/.vimbuf<CR>:q!<CR>
map 	<silent> <C-C> 	:call CopyToBuf()<CR>

" paste to current line from clipboard file
"map 	<C-V> 	:r ~/.vimbuf<CR>
"imap 	<C-V> 	<C-O>:r ~/.vimbuf<CR>
"map 	<C-V> 	:tabnew<CR>:r ~/.vimbuf<CR>1GddyG:tabn<CR>p:tabn<CR>:q!<CR>
"imap 	<C-V> 	<ESC>:tabnew<CR>:r ~/.vimbuf<CR>1GddyG:tabn<CR>p:tabn<CR>:q!<CR>
map 	<C-V> 	:call PasteFromBuf()<CR>

" í™”ë©´ì´ë™ í‚¤ë¥¼ ë¦¬ë§µí•œë‹¤.
map 	<C-j> 	<C-E>
imap 	<C-j> 	<C-O><C-E>
map 	<C-k> 	<C-Y>
imap 	<C-k> 	<C-O><C-Y>

map 	f 		<C-f> 	
map 	b 		<C-b> 	

" í•¨ìˆ˜ê°€ ì—¬ëŸ¬ê°œ ìˆëŠ” ê²½ìš° ì„ íƒ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.
"map		<C-->	g]
"map		<C-\>	g]
"map 	<C-p> :vsp <CR>:exec("tag ".expand("<cword>"))<CR>

" í™”ë©´ì— highligtë¥¼ ë°˜ì „í•œë‹¤.
"map 	<C-I> 	:set invhls<CR>

map 	<C-o> 	:e 
"map 	<C-p> 	<Nop>

" disable increase number
nmap    <C-A> 	<Nop>
" disable decrease number
nmap    <C-X> 	<Nop>

"""""""""""""""""""""""""""""""""""""""""""""""
"" for normal key 

" C souce commnet
noremap <silent> ,c :call CommentLine()<CR>
noremap <silent> ,u :call UnCommentLine()<CR>

" ë³€ê²½ë‚´ìš©ì„ ë¬´ì‹œí•˜ê³  ë¬´ì¡°ê±´ vimì„ ì¢…ë£Œ 
noremap <silent> Q :q!<CR>

" grep for word under cursor in c/cpp/h-files 
"map 	,g 	:grep! --color=auto --exclude=tags --exclude=cscope.out -I <cword> *.[ch]   <cr> :cw<CR>
map 	,g 	:grep! --color=auto --exclude=tags --exclude=cscope.out -I <cword> *   <cr> :cw<CR>
map 	,G 	:grep! --exclude=tags --exclude=cscope.out --exclude-dir="linux_*" --exclude-dir=".svn"  -I <cword> * -r<cr> :cw<CR>

" í•´ë‹¹ íŒŒì¼ì˜ í•¨ìˆ˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì¤€ë‹¤.
"noremap ,t 	:TlistToggle<CR>

" close error window
"nnoremap ,e :call MyToggleQuickFix()<CR>
nnoremap ,e :call ToggleQuickfixList()<CR>
nnoremap ,s :call ToggleErrors()<CR>
"noremap ,e 	:cw<CR>
" close error window
"noremap ,w 	:ccl<CR>

" fileformatë¥¼ unixë¡œ ë°”ê¾¼ë‹¤. CR/LFê°€ ìˆì„ ê²½ìš° unixí˜•ìœ¼ë¡œ í•˜ë©´ CR ì´ ì—†ì–´ì§„ë‹¤.
noremap ,m 	:set ff=unix<CR>

" í˜„ì¬ ì»¤ì„œ ìœ„ì¹˜ì˜ ë¬¸ìë¥¼ ë³€ê²½í•œë‹¤.
nmap 	,r 	:%s/\<<c-r><c-w>\>/
" / / coloringì´ ì´ìƒí•´ì ¸ì„œ ë„£ì—ˆìŒ...

" í•¨ìˆ˜ ì„¤ëª…ì„ ì¶”ê°€í•œë‹¤.
"noremap ,h 	:call InsertDesc()<CR>
"noremap ,h  :call MakeDoxygenComment()<CR>

" ì´ë¦„ê³¼ ë‚ ì§œë¥¼ ì¶”ê°€í•œë‹¤.
noremap ,n 	:call InsertName()<CR>

" í˜„ì¬ì˜ {}ë¥¼ formatting í•œë‹¤.
noremap	,f		=a{''	

" í˜„ì¬ wordë¥¼ ëŒ€ë¬¸ìë¡œ ë³€í™˜
noremap	,u 		gUiw

" íŒŒì¼ ì „ì²´ formatting
" gg=G
"
" set paste
" set nopaste

" í˜„ì¬ì˜ ìœ„ì¹˜ì—ì„œ ë°”ë¡œ ìƒìœ„ {}ë¥¼ ì°¾ëŠ”ë‹¤.
noremap {		[{

" í˜„ì¬ì˜ ìœ„ì¹˜ì—ì„œ ë°”ë¡œ ì•„ë˜ {}ë¥¼ ì°¾ëŠ”ë‹¤.
noremap }		]}

" ë¼ì¸ì˜ ì²˜ìŒìœ¼ë¡œ ì´ë™í•œë‹¤.
noremap `		0
" ë¼ì¸ì˜ ë§¨ëìœ¼ë¡œ ì´ë™í•œë‹¤.
noremap 0		$

"í˜„ì¬ì˜ ë¸”ëŸ­ì„ ì¢Œindent í•œë‹¤.
noremap ,<	<a{

"í˜„ì¬ì˜ ë¸”ëŸ­ì„ ìš°indent í•œë‹¤.
noremap ,>	>a{

" markì— ê´€í•œ í‚¤ ì„¤ì •
map .m :call ToggleMarkWok()<cr>
map .c :call KillAllMarksWok()<cr>
map .p :call PrevMarkWok()<cr>
map .n :call NextMarkWok()<cr>
"nnoremap <silent> <leader>ff :call g:Jsbeautify()<cr>
map .f :call g:Jsbeautify()<cr>

" command key
noremap ; :

" ë¨¼ì§€ ì˜ëª¨ë¥´ê² ìŒ...
"map f :s/^/\/\//g
"map F :s/^/\/\//g
"map t :s/^/\t//g
"map T :s/^\t//g

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" autocmd
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" c,cpp,h íŒŒì¼ì€ tabì„ spaceìœ¼ë¡œ ë³€ê²½
au Bufenter *.\(c\|cpp\|h\) set expandtab
autocmd FileType make setlocal noexpandtab 	" disable it for Makefile

" PlantUML
" ~/.vim/syntax$ wget https://raw.githubusercontent.com/aklt/plantuml-syntax/master/syntax/plantuml.vim
" https://github.com/scrooloose/vim-slumlord
" https://github.com/weirongxu/plantuml-previewer.vim
autocmd BufRead,BufNewFile *.puml set filetype=plantuml
"au FileType plantuml let g:plantuml_previewer#plantuml_jar_path = get(
"    \  matchlist(system('cat `which plantuml` | grep plantuml.jar'), '\v.*\s[''"]?(\S+plantuml\.jar).*'),
"    \  1,
"    \  0
"    \)


"
" use white space instead of tab in Python
autocmd FileType * set tabstop=4|set shiftwidth=4|set noexpandtab|set fo=tcq
"autocmd FileType python set tabstop=4|set shiftwidth=4|set expandtab
"autocmd BufEnter *.py set ai sw=4 ts=4 sta et fo=croql
autocmd BufEnter *.py set ai sw=4 ts=4 sta et fo=ql wrap
autocmd BufEnter *.conf setf dosini set expandtab sw=4 ts=4
au BufEnter *.conf set expandtab

" auto comment ê¸°ëŠ¥ì„ off í•œë‹¤. /**/ì˜ ìë™ ìƒì„±
"au FileType *.c setl fo-=cro
"au FileType *.c setlocal comments-=://
" ë§ˆì§€ë§‰ í¸ì§‘ ìœ„ì¹˜ë¡œ ê°„ë‹¤
autocmd BufReadPost *
   \ if line("'\"") > 0 && line("'\"") <= line("$") |
   \   exe "normal g`\"" |
   \   exe "normal zz" |
   \ endif

" ë¼ì¸ëì˜ whitespaceë¥¼ redë¡œ í‘œì‹œ
"au BufRead,BufNewFile *.py,*.pyw,*.c,*.h match BadWhitespace /\s\+$/

" comment ì™€ ê´€ë ¨í•œ ì‚¬í•­.
"autocmd FileType c,cpp  set formatoptions=croql cindent comments=sr:/*,mb:*,el:*/,://

" Makefileì—ì„œ '#'ìœ¼ë¡œ ì‹œì‘ë˜ëŠ” ë¬¸ì¥ì—ì„œ indentê°€ ì—†ì–´ ì§€ëŠ” í˜„ìƒ ë°©ì§€
"autocmd FileType * set cindent
"autocmd FileType make set cindent

"autocmd FileType * set cindent
"	    \ cinkeys-=0#

" í˜„ì¬ ë””ë ‰í† ë¦¬ë¥¼ í˜„ì¬ ì—´ê³  ìˆëŠ” ë¬¸ì„œì˜ ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½í•œë‹¤.
"if has("autocmd")
"	autocmd BufEnter * :cd %:p:h
"endif

" ë‹¨ì–´ ìë™ ì™„ì„± ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤.
"autocmd VimEnter * call DoWordComplete()

" jQuery syntax
"au BufRead,BufNewFile jquery.*.js set ft=javascript syntax=jquery
"au BufRead,BufNewFile *.js set filetype=javascript

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" status line ì •ì˜
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" status line ì¶œë ¥ ê¸°ëŠ¥.
set laststatus=2
set statusline=%4*%m%3*%<%F%3*%=%5*\ Line\ %3l\ Column\ %c\ %p%%\ %4*%m
"set statusline=\ %F%m%r%h\ %w\ \ \ \ Line:\ %l/%L:%c

" ìƒíƒœë¼ì¸ì— íŒŒì¼ëª…, í•¨ìˆ˜ëª…ì„ ì¶œë ¥í•œë‹¤.
let g:ctags_statusline=2
let g:generate_tags=1

" doxygen parameter
let g:Dox_Author="ì •ì§€í˜¸"
let g:Dox_CurrentDate = 1
let g:Dox_Param = 1
" repos_dir ì€  ê°œë°œì ê°œë°œ ê²½ë¡œë¡œ ìˆ˜ì •
let g:repos_dir	="/data/patrick/src/sg30_main"
let g:sg_dir = "sg30"


""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"  vimì—ì„œ ì‚¬ìš©í•˜ëŠ” ìœ ìš©í•œ í‚¤ë¥¼ ìŠì–´ë¨¹ì§€ ì•Šê¸° ìœ„í•´ ì ì–´ ë†“ëŠ”ë‹¤.
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" 1) ^p, ^n : í•¨ìˆ˜,ë³€ìˆ˜ ìë™ ì™„ì„±ê¸°ëŠ¥   
" 2) 
" 3) :'<,'>s/fred/joe/g  => ì„ íƒí•œ ì˜ì—­ì„ ë°”ê¾¼ë‹¤.

function! InsertTabWrapper()
	let col = col('.') - 1
	if !col || getline('.')[col-1]!~'\k'
		return "\<TAB>"
	else
	if pumvisible()
		return "\<C-N>"
	else
		return "\<C-N>\<C-P>"
	end
	endif
endfunction
inoremap <tab> <c-r>=InsertTabWrapper()<cr>
"inoremap <expr> <CR> pumvisible() ? "<C-Y><CR>" : "<CR>"

hi Pmenu ctermbg=6
hi PmenuSel ctermbg=yellow ctermfg=black
hi PmenuSbar ctermbg=blue

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" copy and paste in vim
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
function! CopyToBuf()
	let firstline = line("'<")
	let lastline  = line("'>")
	let buffile = expand("~/.vimbuf")
	exe 'redir! > ' . buffile
	redir END
	for lno in range(firstline, lastline)
		let copybuf = getline(lno)
		exe 'redir >> ' . buffile
		silent echon copybuf . "\n"
		redir END
	endfor
endfunction

function! PasteFromBuf()
	let buffile = expand("~/.vimbuf")
	let curline = line('.')
	let copybuf =  readfile(buffile)
	call append(curline, copybuf)
endfunction

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" tag file ì •ì˜
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
set tags=
"set tags=./tags,/usr/include/tags,/usr/src/linux/tags 
"set tags=/usr/src/linux-3.16.0/tags
set tags+=./tags
set tags+=./../tags
"set tags+=/home/jhj/src/tiw/suricata/tags
"set tags+=/home/jhj/src/mos/pcap_mos/tags
"set tags+=/home/jhj/src/mos/dpdk_mos/tags
"set tags+=/home/jiho/src/kraken/tags
"set tags+=/home/jiho.jung/src/ovs/tags
"set tags+=/home/jiho.jung/src/openvswitch-2.14.0/tags
"set tags+=/home/jiho.jung/src/openvswitch-2.15.0-mine/tags
"set tags+=/home/jiho.jung/src/jiho-dev/openvswitch-2.11.1/tags
"set tags+=/home/jiho.jung/src/ulogd-2.0.7/tags
"set tags+=/home/jiho.jung/src/3.10.0-957.el7.x86_64/tags
"set tags+=/home/jiho.jung/src/kernel/linux-3.10.0-1127.el7/tags
"set tags+=/home/jiho.jung/src/kernel/linux-4.18.0-240.22.1.el8_3/tags
"set tags+=/home/jiho.jung/src/kernel/linux-3.10.0-1127.el7/tags
"set tags+=/home/jiho.jung/src/trex/trex-core-2.80/src/tags
"set tags+=/home/jiho.jung/src/dpvs/tags
"set tags+=/home/jiho.jung/src/jiho-dev/libevent/tags
"set tags+=/home/jiho.jung/src/jiho-dev/libevent/tags
"set tags+=/home/jiho.jung/~/src/jiho-dev/tcpscaler/tags
"set tags+=/home/jiho.jung/src/libvirt/tags
"set tags+=/home/jiho.jung/src/suricata/src/tags
"set tags+=/home/jiho.jung/src/jiho-dev/sprotly/src/tags


set path=./,./include,../include,../../include,../../../include,/usr/include

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" indexer pluginì„ ì‚¬ìš©í•˜ë©´ì„œ, ë”ì´ìƒ í•„ìš” ì—†ìŒ.
function! UPDATE_TAGS()
	let _f_ = expand("%:p")
	"let _f_ = expand("%:p:h")
	"echo _f_
 	let cwd = getcwd()
  	let tagfilename = cwd . "/tags"
	"let _cmd_ = '"ctags -a -f /dvr/tags --c++-kinds=+p --fields=+iaS --extra=+q " ' . '"' . _f_ . '"'
	let _cmd_='ctags -R --exclude=bak --exclude=cornerstone-framework-master --exclude=webdoc -I EXPORT_SYMBOL,EXPORT_SYMBOL_GPL'
	let _resp = system(_cmd_)
	unlet _cmd_
	unlet _f_
	unlet _resp
endfunction
"autocmd BufWritePost *.cpp,*.h,*.c,*.cc call UPDATE_TAGS()

" on/off cscope
let g:use_cscope=1

if has("cscope")
"	set csprg=~/bin/cscope
"	set csto=0
"	set cst
"	set nocsverb
	" add any database in current directory
	if filereadable("cscope.out")
		cs add cscope.out
	" else add database pointed to by environment
	elseif $CSCOPE_DB != ""
		cs add $CSCOPE_DB
	endif
endif

function! s:GetBufferList() 
  redir =>buflist 
  silent! ls 
  redir END 
  return buflist 
endfunction

function! ToggleQuickfixList()
  for bufnum in map(filter(split(s:GetBufferList(), '\n'), 'v:val =~ "Quickfix List"'), 'str2nr(matchstr(v:val, "\\d\\+"))') 
    if bufwinnr(bufnum) != -1
      cclose
      return
    endif
  endfor

  let winnr = winnr()
  copen 10
  if winnr() != winnr
    wincmd p
  endif
endfunction

function! ToggleErrors()
    if empty(filter(tabpagebuflist(), 'getbufvar(v:val, "&buftype") is# "quickfix"'))
         " No location/quickfix list shown, open syntastic error location panel
         Errors
    else
        lclose
    endif
endfunction

function! DoMake()
	if (&ft=='python')
		echo "Syntanx check for Python"
        :SyntasticCheck
		:make!
	else
        :make!
	endif

endfunction

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" plugin ì— ê´€ë ¨í•œ ì •ì˜
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

set rtp+=~/.vim/bundle/vundle

call vundle#rc()
"""""""""""""""""""""
Plugin 'gmarik/vundle'

"Plugin 'Chiel92/vim-autoformat'

"Plugin 'indexer.tar.gz'
"Plugin 'vimprj'
"Plugin 'DfrankUtil'
Plugin 'The-NERD-tree'
"Plugin 'francoiscabrol/ranger.vim'
Plugin 'git://github.com/klen/python-mode.git'
"Plugin 'scrooloose/syntastic'
"
Plugin 'hashivim/vim-terraform'

Plugin 'fatih/vim-go'
"Plugin 'Valloric/YouCompleteMe'

" for PlantUml
"Plugin 'scrooloose/vim-slumlord'
"Plugin 'weirongxu/plantuml-previewer.vim'


"
"
":BundleSearch
":BundleInstall
":BundleClean

"""""""""""""""""""""
call vundle#end()            " required

let g:vundle#lazy_load = 1

" í–‰ì¶”ê°€ì‹œ // ê°€ ìˆëŠ”ê²½ìš° ìë™ìœ¼ë¡œ ì¶”ê°€ ë˜ëŠ” í˜„ìƒ ë°©ì§€
"filetype plugin indent on    " required

" for javascript
"set g:js_indent=~/.vim/indent/javascript.vim
"set g:js_indent_log=1 "logging off

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

let g:indexer_disableCtagsWarning=1


""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Python-mode
" Activate rope
" Keys:
" K             Show python docs
" <Ctrl-Space>  Rope autocomplete
" <Ctrl-c>g     Rope goto definition
" <Ctrl-c>d     Rope show documentation
" <Ctrl-c>f     Rope find occurrences
" <Leader>b     Set, unset breakpoint (g:pymode_breakpoint enabled)
" [[            Jump on previous class or function (normal, visual, operator modes)
" ]]            Jump on next class or function (normal, visual, operator modes)
" [M            Jump on previous class or method (normal, visual, operator modes)
" ]M            Jump on next class or method (normal, visual, operator modes)
"


function! PymodeSetup()

	let g:pymode = 1
	"let g:pymode_rope = 1

	" Documentation
	let g:pymode_doc = 0
	let g:pymode_doc_key = 'K'

	"Linting
	"let g:pymode_lint = 1
	let g:pymode_lint = 0
	"
	"Values may be chosen from: `pylint`, `pep8`, `mccabe`, `pep257`, `pyflakes`.
	"let g:pymode_lint_checker = "pylint,pyflakes,pep8,mmcabe,pep257"
	let g:pymode_lint_checker = "pyflakes,pep8,mmcabe,pep257"
	" Auto check on save
	let g:pymode_lint_write = 1
	"let g:pymode_lint_message = 1

	" Support virtualenv
	let g:pymode_virtualenv = 1

	" Enable breakpoints plugin
	let g:pymode_breakpoint = 1
	let g:pymode_breakpoint_bind = '<leader>b'

	" syntax highlighting
	let g:pymode_syntax = 1
	let g:pymode_syntax_all = 1
	let g:pymode_syntax_indent_errors = g:pymode_syntax_all
	let g:pymode_syntax_space_errors = g:pymode_syntax_all
	let g:pymode_syntax_highlight_equal_operator = g:pymode_syntax_all

	" Don't autofold code
	let g:pymode_folding = 0

	"let g:pep8_ignore="E501,W601,W0611"
	"let g:pep8_ignore="E501,W0611"
	let g:pymode_lint_ignore="E501,W0611,E265,W0612,E266,E303,W602,E129,W0401"
	"let g:pymode_lint_ignore="E501,W0611,E265,E129,E266"

	"let g:pymode_options_max_line_length=80
	let g:pymode_options_max_line_length=0

	let g:pymode_trim_whitespaces = 1 

	let g:pymode_indent = 1
	let g:pymode_lint_on_fly     = 0

	let g:pymode_lint_sort = ['E', 'C', 'I']

	"let g:pymode_rope_goto_definition_bind = "<C-]>"

	" do not open document window
	set completeopt=menu
endfunction
call PymodeSetup()

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" for syntastic 

function! SyntasticSetup()
	set statusline+=%#warningmsg#
	set statusline+=%{SyntasticStatuslineFlag()}
	set statusline+=%*

	" enable/disable syntastic: SyntasticToggleMode<CR>
	" run syntastic: SyntasticCheck<CR>
	" let g:syntastic_mode_map = { 'mode': 'passive', 'active_filetypes': [],'passive_filetypes': [] }
	" for GO
	"let g:syntastic_go_checkers = ['go', 'golint', 'errcheck']
	let g:syntastic_go_checkers = ['govet', 'errcheck', 'go']

	let g:syntastic_python_checkers = ['pylint']
	"let g:syntastic_python_checkers = ['flake8']

	let g:syntastic_always_populate_loc_list = 1
	let g:syntastic_auto_loc_list = 1
	let g:syntastic_check_on_open = 0
	let g:syntastic_check_on_wq = 0
	let g:syntastic_loc_list_height=5

	" close error window: SyntasticReset

	"let g:syntastic_quiet_messages = {'level': 'warning'}
	"let g:syntastic_enable_signs = 1
	let g:syntastic_enable_highlighting = 0
	let g:syntastic_python_pylint_args = '--disable=C0111,R0903,R0201,C0103,C0325,W0611,R0902,R0913,E0704,C0301,R0204,R0914,W0703,E1121,W0511,C0330,W0613,R0904,R0912,E1136,W0612,W0107'
	"let g:syntastic_python_pylint_args_after = '-f text --msg-template="{path}:{line}:{column}:{C}: [{symbol}] {msg} {msg_id}" -r n'
	"
endfunction
"call SyntasticSetup()

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" for GO
" :GoInstallBinaries
" :GoUpdateBinaries
function! VimGoSetup()
  "set updatetime=100
  "set re=1
  "set nocursorcolumn
  "set ttyfast
  "set lazyredraw


  "syntax sync minlines=256
 
  "let mapleader = ","

  " vim-go related mappings
  "au FileType go nmap <Leader>r <Plug>(go-run)
  "au FileType go nmap <Leader>b <Plug>(go-build)
  "au FileType go nmap <Leader>t <Plug>(go-test)
  "au FileType go nmap <Leader>i <Plug>(go-info)
  "au FileType go nmap <Leader>s <Plug>(go-implements)
  "au FileType go nmap ,i <Plug>(go-implements)
  "au FileType go nmap <C-p> <Plug>(go-implements)
  "au FileType go nmap <Leader>c <Plug>(go-coverage)
  "au FileType go nmap <Leader>e <Plug>(go-rename)
  "au FileType go nmap <Leader>gi <Plug>(go-imports)
  "au FileType go nmap <Leader>gI <Plug>(go-install)
  "au FileType go nmap <Leader>gd <Plug>(go-doc)
  "au FileType go nmap <Leader>gv <Plug>(go-doc-vertical)
  "au FileType go nmap <Leader>gb <Plug>(go-doc-browser)
  "au FileType go nmap <Leader>ds <Plug>(go-def-split)
  "au FileType go nmap <Leader>dv <Plug>(go-def-vertical)
  "au FileType go nmap <Leader>dt <Plug>(go-def-tab)

  let g:go_list_type = "quickfix"
  let g:go_addtags_transform = "camelcase"
  "let g:go_autodetect_gopath = 1
  "let g:go_auto_sameids = 1
  ""let g:go_auto_type_info = 1

  " Use new vim 8.2 popup windows for Go Doc
  let g:go_doc_popup_window = 1

  "let g:go_fmt_command = "gofmt"
  "let g:go_fmt_command = "goimports"
  
  " auto import, default enabled
  "let g:go_fmt_autosave = 0

  let g:go_fmt_experimental = 1
  let g:go_dispatch_enabled = 0 " vim-dispatch needed
  let g:go_metalinter_autosave = 0
  let g:go_metalinter_autosave_enabled = ['vet', 'golint']
  let g:go_metalinter_enabled = ['vet', 'golint', 'errcheck']

  let g:go_term_enabled = 0
  let g:go_term_mode = "vertical"

  "let g:go_def_mapping_enabled = 1

  let g:go_highlight_types = 1
  let g:go_highlight_fields = 1
  let g:go_highlight_function_calls = 1
  let g:go_highlight_generate_tags = 1
  let g:go_highlight_methods = 1
  let g:go_highlight_operators = 1
  let g:go_highlight_extra_types = 1
  let g:go_highlight_build_constraints = 1
  let g:go_highlight_chan_whitespace_error = 1
  let g:go_highlight_functions = 1
  let g:go_highlight_function_parameters = 1
  let g:go_highlight_structs = 1
  let g:go_highlight_interfaces = 1
  let g:go_highlight_variable_assignments = 1
  let g:go_highlight_variable_declarations = 1

  let g:go_code_completion_enabled = 1

  " ê²€ì¦ ë˜ì§€ ì•Šì€ ê²ƒë“¤ 
  let g:go_highlight_string_spellcheck = 1
  let g:go_highlight_format_strings = 1
  let g:go_highlight_array_whitespace_error = 1


  "let g:go_diagnostics_enabled = 1
  let g:go_diagnostics_level = 2
  let g:go_highlight_diagnostic_errors = 1
  let g:go_highlight_diagnostic_warnings = 1

  let g:go_fmt_fail_silently = 1

  "let g:go_def_mode='godef' " gopls, godef, guru
  "let g:go_def_mode='guru' " gopls, godef, guru
  let g:go_def_mode='gopls' " gopls, godef, guru
  let g:go_info_mode='gopls'
  "let g:go_gopls_enabled = 0

  "let g:go_guru_scope = ["github.com/cloud-pi/kraken"]
  "
  " let g:go_gopls_options = ['-remote=auto']
  "let g:go_template_autocreate = 0
  "let g:go_test_timeout= '1s'
  "let g:go_test_show_name = 1

  " for debugging
  "let g:go_echo_command_info=1
  "let g:go_debug=['shell-commands', 'debugger-commands']

endfunction
call VimGoSetup()

function! RemoveVimSwapFile()
	let _cmd_='rm -f /home/jiho.jung/.vimswp/*'
	let _resp = system(_cmd_)
endfunction

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
for include_file in uniq(sort(globpath(&rtp, 'vim-include/*.vim', 0, 1)))
    execute "source " . include_file
endfor
